(this.webpackJsonplmp=this.webpackJsonplmp||[]).push([[7],{1074:function(e,t,a){"use strict";a.r(t);var n=a(350),r=a(979),l=a.n(r),i=a(980),c=a(964),s=a(2),o=a.n(s),u=a(959),m=a(975),d=a(998),b=a(963),p=a(233),E=a(172),f=function(e){var t=e.label,a=Object(E.a)(e,["label"]),n=Object(m.c)(a),r=Object(c.a)(n,2),l=r[0],i=r[1];return o.a.createElement(u.v,null,o.a.createElement(u.G,{htmlFor:a.id||a.name},t),o.a.createElement(u.A,Object.assign({},l,a,{invalid:i.touched&&!!i.error})),i.touched&&i.error?o.a.createElement("div",{className:"error"},i.error):null)};var h=function(e){var t=e.label,a=Object(E.a)(e,["label"]),n=Object(m.c)(a),r=Object(c.a)(n,2),l=r[0],i=r[1];return o.a.createElement(u.v,null,o.a.createElement(u.G,{htmlFor:a.id||a.name},t),o.a.createElement(u.K,Object.assign({},l,a,{invalid:i.touched&&!!i.error})),i.touched&&i.error?o.a.createElement("div",{className:"error"},i.error):null)},v=a(30),O=d.b({email:d.c().required("Email id is required").email("Invalid email address"),firstname:d.c().required("Firstname is required"),lastname:d.c().required("Lastname is required"),dob:d.a("Not a valid date").required("DOB is required"),phonenumber:d.c().required().max(10),department_id:d.c().notRequired().nullable(),role_id:d.c().notRequired()}),j={email:"",firstname:"",lastname:"",dob:"",phonenumber:"",department_id:"",role_id:""},g=function(e){switch(e){case"ACTIVE":return"warning";case"APPROVED":return"success";case"DECLINED":return"danger"}};t.default=function(e){var t=e.match,a=Object(s.useState)(j),r=Object(c.a)(a,2),d=r[0],E=r[1],R=Object(s.useState)([]),q=Object(c.a)(R,2),A=q[0],_=q[1],y=Object(s.useState)([]),N=Object(c.a)(y,2),S=N[0],x=N[1],k=Object(s.useState)({}),w=Object(c.a)(k,2),G=w[0],L=w[1],D=Object(s.useState)(!1),P=Object(c.a)(D,2),C=P[0],F=P[1],z=p.a.getRole(),I=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/accessrequests");case 2:t=e.sent,console.log(t.data),L(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){b.a.get("/departments").then((function(e){_(e.data)})),b.a.get("/roles").then((function(e){x(e.data)})),b.a.get("/accessrequests/my").then((function(e){L(e.data)}));var e="/profile";t.params.id&&(e=e+"/"+t.params.id),"/users/create"!==t.path&&b.a.get(e).then((function(e){console.log(e);var t=Object(n.a)({email:"",firstname:"",lastname:"",dob:"",phonenumber:"",department_id:"",role_id:""},e.data);null===t.department_id&&(t.department_id=""),E(t)}))}),[t,t.params.id]),C?o.a.createElement(v.a,{to:"/users"}):o.a.createElement(u.J,null,o.a.createElement(u.l,{md:8},o.a.createElement(u.g,null,o.a.createElement(u.k,null,"Profile"),o.a.createElement(u.h,null,o.a.createElement(m.b,{initialValues:d,onSubmit:function(e,a){var n=a.setSubmitting,r="/profile";t.params.id&&(r=r+"/"+t.params.id),"/users/create"!==t.path?b.a.patch(r,e).then((function(e){console.log(e),n(!1)})):b.a.post("/users",e).then((function(e){console.log(e),n(!1),F(!0)}))},validationSchema:O,enableReinitialize:!0},(function(e){return o.a.createElement(m.a,null,o.a.createElement(f,{label:"Email",id:"email",name:"email"}),o.a.createElement(f,{label:"Firstname",id:"firstname",name:"firstname"}),o.a.createElement(f,{label:"Lastname",id:"lastname",name:"lastname"}),o.a.createElement(f,{label:"Date of birth",id:"dob",name:"dob",type:"date"}),o.a.createElement(f,{label:"Phone Number",id:"phonenumber",type:"tel",name:"phonenumber"}),o.a.createElement(h,{label:"Department",id:"department_id",name:"department_id",custom:!0,disabled:-1!==["MANAGER","GENERAL"].indexOf(z)},o.a.createElement("option",{value:""},"Choose a Department"),A.map((function(e){return o.a.createElement("option",{key:e._id,value:e._id},e.name)}))),o.a.createElement(h,{custom:!0,label:"Role",id:"role_id",name:"role_id",disabled:-1!==["MANAGER","GENERAL"].indexOf(z)},o.a.createElement("option",{value:""},"Choose a Role"),S.map((function(e){return o.a.createElement("option",{key:e._id,value:e._id},e.role)}))),o.a.createElement(u.v,null,o.a.createElement(u.f,{color:"success",type:"submit"},e.isSubmitting?"Submitting...":"Submit")," ","\xa0",o.a.createElement(u.f,{color:"danger",type:"reset"},"Reset")))}))),o.a.createElement(u.i,null))),-1!==["MANAGER","GENERAL"].indexOf(z)?o.a.createElement(u.l,{md:4},o.a.createElement(u.g,null,o.a.createElement(u.h,{className:"text-center"},-1!==["GENERAL"].indexOf(z)&&G?o.a.createElement(u.a,{color:g(G.status)},"Your request staus is"," ",o.a.createElement(u.b,{color:g(G.status)},G.status)):o.a.createElement(u.f,{type:"button",size:"md",onClick:I,color:"success"},"Request Elevated Access")))):null)}},963:function(e,t,a){"use strict";var n=a(971),r=a.n(n),l=a(174);r.a.defaults.baseURL="https://lawyer-management-system.herokuapp.com/api/v1",r.a.interceptors.request.use((function(e){var t=l.a.getAccessToken();return t&&(e.headers.Authorization="Bearer "+t),e}),(function(e){Promise.reject(e)})),t.a=r.a},979:function(e,t,a){e.exports=a(357)},980:function(e,t,a){"use strict";function n(e,t,a,n,r,l,i){try{var c=e[l](i),s=c.value}catch(o){return void a(o)}c.done?t(s):Promise.resolve(s).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,l){var i=e.apply(t,a);function c(e){n(i,r,l,c,s,"next",e)}function s(e){n(i,r,l,c,s,"throw",e)}c(void 0)}))}}a.d(t,"a",(function(){return r}))}}]);
//# sourceMappingURL=7.5826a320.chunk.js.map